{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "UserCredentialsController"
    },
    "designerId": "4fd5c999-6918-471c-87b8-96d68a98489a",
    "cn": [
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "homeTabCardPanel",
                "selector": "homeTabCardPanel"
            },
            "designerId": "c7f74e71-6a07-4d98-bcf6-cda16cfcf85d"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "landingCardPanel",
                "selector": "landingCardPanel",
                "xtype": null
            },
            "designerId": "233e39f7-6a7e-4339-9208-ddd40d4b4562"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onRegistrationCardPanelItemIdSignUpSuccess",
                "designer|params": [
                    "userObject"
                ],
                "implHandler": [
                    "var landingCardPanel = this.getLandingCardPanel();\r",
                    "var mainTabPanel = this.getMainTabPanel();\r",
                    "var homeTabCardPanel = this.getHomeTabCardPanel();\r",
                    "\r",
                    "this.populateUserInfo(userObject);\r",
                    "this.populateUserResources(userObject);\r",
                    "\r",
                    "mainTabPanel.setActiveItem(homeTabCardPanel);\r",
                    "landingCardPanel.animateActiveItem(mainTabPanel, { type: 'slide'});\r",
                    ""
                ],
                "name": "signUpSuccess",
                "designer|targetType": null,
                "designer|controlQuery": "panel"
            },
            "designerId": "8adce83d-36f6-4f59-abca-36f11fd96f56"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "genericLoginForm",
                "selector": "genericLoginForm"
            },
            "designerId": "2aa12afe-5197-42b0-9750-51f570318354"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onLoginFormItemIdSignUpRequested",
                "designer|params": [
                    "formpanel"
                ],
                "implHandler": [
                    "var landingCardPanel = this.getLandingCardPanel();\r",
                    "var registrationCardPanel = this.getRegistrationCardPanel();\r",
                    "var signOutButton = registrationCardPanel.down('#signOutButton');\r",
                    "var quickSignupForm = registrationCardPanel.down('#whatsYourNameForm');\r",
                    "var userid = quickSignupForm.down('#firstNameAsUserId');\r",
                    "var wordYouLike = quickSignupForm.down('#wordYouLike');\r",
                    "\r",
                    "var host = MyApp.app.getHost();\r",
                    "var registrationUrl = host + registrationCardPanel.getInitialConfig().registrationUrl;\r",
                    "\r",
                    "registrationCardPanel.getInitialConfig().registrationUrl = registrationUrl;\r",
                    "\r",
                    "signOutButton.hide();\r",
                    "userid.setValue('');\r",
                    "wordYouLike.setValue('');\r",
                    "\r",
                    "registrationCardPanel.setActiveItem(0);\r",
                    "landingCardPanel.animateActiveItem(registrationCardPanel, { type: 'slide'});"
                ],
                "name": "signUpRequested",
                "designer|targetType": "loginmodule",
                "designer|controlQuery": "formpanel"
            },
            "designerId": "699af9c6-fef2-42c6-b8fa-53d927c27677"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "registrationCardPanel",
                "selector": "registrationCardPanel",
                "xtype": null
            },
            "designerId": "dba25738-b8d8-421d-ad07-e177e59d0fa0"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onLoginFormItemIdSignInSuccess",
                "designer|params": [
                    "userObject"
                ],
                "implHandler": [
                    "var landingCardPanel = this.getLandingCardPanel();\r",
                    "var mainTabPanel = this.getMainTabPanel();\r",
                    "var homeTabCardPanel = this.getHomeTabCardPanel();\r",
                    "var tortletsListsContainerPanel = this.getTortletsListsContainerPanel();\r",
                    "var todaysTortletListPanel = this.getTodaysTortletListPanel();\r",
                    "var mainPageSegmentedButton = this.getMainPageSegmentedButton();\r",
                    "var showTodayListButton = this.getShowTodayListButton();\r",
                    "\r",
                    "this.populateUserInfo(userObject);\r",
                    "this.populateUserResources(userObject);\r",
                    "\r",
                    "mainPageSegmentedButton.setPressedButtons(showTodayListButton);\r",
                    "tortletsListsContainerPanel.setActiveItem(todaysTortletListPanel);\r",
                    "mainTabPanel.setActiveItem(homeTabCardPanel);\r",
                    "landingCardPanel.animateActiveItem(mainTabPanel, { type: 'slide'});"
                ],
                "name": "signInSuccess",
                "designer|targetType": "loginmodule",
                "designer|controlQuery": "formpanel"
            },
            "designerId": "d183b68e-5397-4a6b-a457-4a86ec1f5942"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "populateUserInfo",
                "designer|params": [
                    "userObject"
                ],
                "implHandler": [
                    "var userid = userObject.userid;\r",
                    "var authHeaderValue = userObject.authHeaderValue;\r",
                    "\r",
                    "localStorage.setItem('userid',userid);\r",
                    "localStorage.setItem('userInfo', JSON.stringify(userObject));\r",
                    ""
                ]
            },
            "designerId": "84829d2b-8cc7-4a07-bdad-40488cce1ed6"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "mainTabPanel",
                "selector": "mainTabPanel",
                "xtype": null
            },
            "designerId": "9523ecbe-e521-4cbb-a0e2-7e51e18ebf57"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "registrationPage1",
                "selector": "#registrationPage1"
            },
            "designerId": "76f5d3a3-0136-41ae-8295-23b87547bd18"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "populateUserResources",
                "designer|params": [
                    "userObject"
                ],
                "implHandler": [
                    "var utility = MyApp.app.getController('UtilityController');\r",
                    "var storeLoadCallback = utility.storeLoadCallback;\r",
                    "\r",
                    "var userid = userObject.userid;\r",
                    "var authHeaderValue = userObject.authHeaderValue;\r",
                    "\r",
                    "var today = MyApp.app.getToday();\r",
                    "\r",
                    "var host = MyApp.app.getHost();\r",
                    "\r",
                    "//todaysTortletsStore\r",
                    "var todaysTortletsStore = Ext.getStore('todaysTortletsStore');\r",
                    "var proxy = todaysTortletsStore.getProxy();\r",
                    "var todayOrgUrl = host + '/tortlets?find=ByUseridEqualsAndCreatedOnEqualsAndCompleted&userid=' +userid ;\r",
                    "proxy.setUrl(todayOrgUrl + '&createdOn=' + today);\r",
                    "var headers = proxy.getHeaders();\r",
                    "headers.Authorization = authHeaderValue;\r",
                    "\r",
                    "todaysTortletsStore.load(storeLoadCallback);\r",
                    "proxy.setUrl(todayOrgUrl);\r",
                    "\r",
                    "//incompleteTortletsStore\r",
                    "var incompleteTortletsStore = Ext.getStore('incompleteTortletsStore');\r",
                    "proxy = incompleteTortletsStore.getProxy();\r",
                    "headers = proxy.getHeaders();\r",
                    "headers.Authorization = authHeaderValue;\r",
                    "proxy.setUrl(host + '/tortlets?find=ByUseridEqualsAndCompleted&userid=' +userid);\r",
                    "\r",
                    "//incompleteTortletsStore.load(storeLoadCallback);\r",
                    "\r",
                    "//dreamsStore\r",
                    "var dreamsStore = Ext.getStore('dreamsStore');\r",
                    "proxy = dreamsStore.getProxy();\r",
                    "headers = proxy.getHeaders();\r",
                    "headers.Authorization = authHeaderValue;\r",
                    "proxy.setUrl(host + '/dreams?find=ByUseridEquals&userid=' +userid);\r",
                    "\r",
                    "dreamsStore.load(storeLoadCallback);\r",
                    "\r",
                    "//tortoisesStore\r",
                    "var tortoisesStore = Ext.getStore('tortoisesStore');\r",
                    "proxy = tortoisesStore.getProxy();\r",
                    "headers = proxy.getHeaders();\r",
                    "headers.Authorization = authHeaderValue;\r",
                    "proxy.setUrl(host + '/tortoises?find=ByDreamAndUseridEquals&userid=' +userid);\r",
                    "\r",
                    "////////////////////////////////////////////////////\r",
                    "\r",
                    "var Tuser = Ext.ModelMgr.getModel('MyApp.model.Tuser');\r",
                    "proxy = Tuser.getProxy();\r",
                    "headers = proxy.getHeaders();\r",
                    "headers.Authorization = authHeaderValue;\r",
                    "proxy.setUrl(host + '/tusers');\r",
                    "\r",
                    "var Dream = Ext.ModelMgr.getModel('MyApp.model.Dream');\r",
                    "proxy = Dream.getProxy();\r",
                    "headers = proxy.getHeaders();\r",
                    "headers.Authorization = authHeaderValue;\r",
                    "proxy.setUrl(host + '/dreams');\r",
                    "\r",
                    "var Tortoise = Ext.ModelMgr.getModel('MyApp.model.Tortoise');\r",
                    "proxy = Tortoise.getProxy();\r",
                    "headers = proxy.getHeaders();\r",
                    "headers.Authorization = authHeaderValue;\r",
                    "proxy.setUrl(host + '/tortoises');\r",
                    "\r",
                    "var Tortlet = Ext.ModelMgr.getModel('MyApp.model.Tortlet');\r",
                    "proxy = Tortlet.getProxy();\r",
                    "headers = proxy.getHeaders();\r",
                    "headers.Authorization = authHeaderValue;\r",
                    "proxy.setUrl(host + '/tortlets');\r",
                    "\r",
                    "console.log('coming out populate user resources');"
                ]
            },
            "designerId": "64825e33-ee9d-430e-9ad0-805ab459b228"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "populateUserSettingsForm",
                "designer|params": [
                    "form"
                ],
                "implHandler": [
                    "registrationPage1 = form;\r",
                    "\r",
                    "var firstName = registrationPage1.down('#firstName');\r",
                    "var lastName = registrationPage1.down('#lastName');\r",
                    "var userEmail = registrationPage1.down('#userEmail');\r",
                    "\r",
                    "var userid = registrationPage1.down('#userid');\r",
                    "var password = registrationPage1.down('#password');\r",
                    "var readablePassword = registrationPage1.down('#readablePassword');\r",
                    "\r",
                    "var userObject =  JSON.parse(localStorage.getItem('userInfo'));\r",
                    "\r",
                    "registrationPage1.userObject = userObject; // Assigning userObject to \r",
                    "// registration page because will need things like current authValue\r",
                    "// while updating the user\r",
                    "\r",
                    "firstName.setValue(userObject.firstName);\r",
                    "lastName.setValue(userObject.lastName);\r",
                    "userEmail.setValue(userObject.userEmail);\r",
                    "\r",
                    "userid.setValue(userObject.userid);\r",
                    "password.setValue(userObject.plainPassword);\r",
                    "readablePassword.setValue(userObject.plainPassword);"
                ]
            },
            "designerId": "8fe315f8-f44d-46ea-85de-d455b3cebdf7"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onUserProfileButtonTap",
                "implHandler": [
                    "var landingCardPanel = this.getLandingCardPanel();\r",
                    "var registrationCardPanel = this.getRegistrationCardPanel();\r",
                    "var registrationPage1 = this.getRegistrationPage1();\r",
                    "var signOutButton = registrationCardPanel.down('#signOutButton');\r",
                    "var userObject = Ext.JSON.decode(localStorage.getItem('userInfo'));\r",
                    "\r",
                    "signOutButton.show();\r",
                    "registrationPage1.getScrollable().getScroller().scrollToTop();\r",
                    "\r",
                    "registrationCardPanel.setActiveItem(registrationPage1);\r",
                    "\r",
                    "MyApp.app.getController('MyApp.controller.UserCredentialsController').populateUserSettingsForm(registrationPage1);\r",
                    "landingCardPanel.animateActiveItem(registrationCardPanel, { type: 'slide'});\r",
                    "\r",
                    ""
                ],
                "name": "tap",
                "designer|targetType": "Ext.Button",
                "designer|controlQuery": "button[name='userProfileButton']"
            },
            "designerId": "50401324-0880-4422-8f20-de4db310475f"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onRegistrationCardPanelItemIdSignOut",
                "designer|params": [
                    "panel"
                ],
                "implHandler": [
                    "var landingcardPanel = this.getLandingCardPanel();\r",
                    "var useridField = landingcardPanel.down('#userIdItemId');\r",
                    "var lastUserId = localStorage.getItem('userid');\r",
                    "var dreamsStore = Ext.getStore('dreamsStore');\r",
                    "\r",
                    "\r",
                    "localStorage.setItem('userInfo', null);\r",
                    "\r",
                    "landingcardPanel.setActiveItem(0);\r",
                    "\r",
                    "useridField.setValue(lastUserId);\r",
                    ""
                ],
                "name": "signOut",
                "designer|targetType": "signupmodule",
                "designer|controlQuery": "panel"
            },
            "designerId": "d30ab123-6185-42e4-bef0-26c719572d19"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "tortletsListsContainerPanel",
                "selector": "tortletsListsContainerPanel"
            },
            "designerId": "961d5093-60da-493b-986f-3a971d57c3d5"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "todaysTortletListPanel",
                "selector": "todaysTortletListPanel"
            },
            "designerId": "db04c36d-daac-45c5-af7e-e0feafd126d8"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "showTodayListButton",
                "selector": "button[name='showTodayListButton']"
            },
            "designerId": "b825ab9b-0bd4-4fb8-9573-435732f53eb0"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "mainPageSegmentedButton",
                "selector": "segmentedbutton[name='mainPageSegmentedButton']"
            },
            "designerId": "41335e62-a4a2-4086-8892-b6880350a862"
        }
    ]
}