{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "DreamsTabController"
    },
    "designerId": "b4ef4b19-e96a-4128-b08f-83eee4866b5b",
    "cn": [
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onHomeTabNewDreamButtonTap",
                "implHandler": [
                    "console.log('inside onHomePageDreamButtonTap');\r",
                    "var dreamForm = this.getDreamDetails();\r",
                    "var mainTabPanel = this.getMainTabPanel();\r",
                    "var deleteButton = this.getDreamDeleteButton(); \r",
                    "var dreamListCardPanel = this.getDreamListCardPanel();\r",
                    "var whatsYourDreamTextField = this.getWhatsYourDreamTextField();\r",
                    "\r",
                    "var text = this.getWhatsYourDreamTextField().getValue();\r",
                    "\r",
                    "console.log('button : ' + button.config.name);\r",
                    "var record = Ext.create('MyApp.model.Dream');\r",
                    "record.set('title', text);\r",
                    "\r",
                    "dreamForm.newStatus='true';\r",
                    "\r",
                    "dreamForm.origin = button.config.name;   \r",
                    "\r",
                    "dreamForm.setRecord(record);\r",
                    "\r",
                    "mainTabPanel.setActiveItem(1);\r",
                    "\r",
                    "deleteButton.hide();\r",
                    "dreamForm.getScrollable().getScroller().scrollToTop();\r",
                    "dreamListCardPanel.animateActiveItem(dreamForm, { type: 'slide'});\r",
                    "whatsYourDreamTextField.setValue('');\r",
                    ""
                ],
                "name": "tap",
                "designer|targetType": "Ext.Button",
                "designer|controlQuery": "button[name='homePageDreamButton']"
            },
            "designerId": "eedb6ac0-136c-4956-8e54-a0fa6a277d56"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onDreamListItemTap",
                "implHandler": [
                    "var dreamDetails = this.getDreamDetails();\r",
                    "var dreamListCardPanel = this.getDreamListCardPanel();\r",
                    "\r",
                    "dreamDetails.newStatus = 'false';\r",
                    "dreamDetails.setRecord(record);\r",
                    "\r",
                    "MyApp.app.currentDreamId = record.get('id');\r",
                    "this.getDreamDeleteButton().show();\r",
                    "dreamDetails.getScrollable().getScroller().scrollToTop();\r",
                    "dreamListCardPanel.animateActiveItem(dreamDetails, { type: 'slide'} );\r",
                    ""
                ],
                "name": "itemtap",
                "designer|targetType": "DreamList",
                "designer|controlQuery": "dreamList"
            },
            "designerId": "6a472545-fa60-47a8-8b8f-00b688783d49"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onDreamDetailsNextButtonTap",
                "implHandler": [
                    "var tortoiseListPanel = this.getTortoiseListPanel();\r",
                    "var tortoiseList = this.getTortoiseList();\r",
                    "var dreamDetailsForm = this.getDreamDetails();\r",
                    "var newStatus = dreamDetailsForm.newStatus;\r",
                    "var currentUser = Ext.JSON.decode(localStorage.getItem('userInfo'));\r",
                    "/* Accessing global variable which has been set \r",
                    "in Application launch() function */\r",
                    "var userObject = currentUser; \r",
                    "var userid = currentUser.id.toString();\r",
                    "var utility = MyApp.app.getController('UtilityController');\r",
                    "/* Need this so that this controller is available in \r",
                    "callback methods. */\r",
                    "var caller = MyApp.app.getController('DreamsTabController');\r",
                    "var tempDreamId = MyApp.app.tempId;\r",
                    "\r",
                    "var newOrOldDream = dreamDetailsForm.getRecord();\r",
                    "var oldTitle = newOrOldDream.get('title');\r",
                    "var oldNotes = newOrOldDream.get('notes');\r",
                    "\r",
                    "dreamDetailsForm.updateRecord(newOrOldDream);\r",
                    "var newTitle = newOrOldDream.get('title');\r",
                    "var newNotes = newOrOldDream.get('notes');\r",
                    "//alert('dreamId ' + newOrOldDream.get('id'));\r",
                    "\r",
                    "\r",
                    "\r",
                    "var errors = newOrOldDream.validate();\r",
                    "\r",
                    "if (!errors.isValid()) {\r",
                    "    Ext.Msg.alert('Enter all mandatory fields', '', Ext.emptyFn);\r",
                    "    newOrOldDream.reject();\r",
                    "    return;\r",
                    "}\r",
                    "var operation = {};\r",
                    "operation.success = this.dreamSave;\r",
                    "operation.failure = function() {\r",
                    "    Ext.Msg.alert(MyApp.app.getServerErrorMessage(),'',Ext.emptyFn);\r",
                    "    Ext.Viewport.setMasked(false);\r",
                    "return;};\r",
                    "\r",
                    "Ext.Viewport.setMasked({xtype: 'loadmask'});\r",
                    "\r",
                    "if(newStatus === 'true'){ \r",
                    "    newOrOldDream.set('userid', userid);\r",
                    "    newOrOldDream.setTuser(currentUser);\r",
                    "    /* IF u dont do following, id will be posted to server as \r",
                    "    ext-record-<number>. That will result into exception */\r",
                    "    newOrOldDream.set('id',MyApp.app.tempId);\r",
                    "    newOrOldDream.save(operation);\r",
                    "\r",
                    "}else{\r",
                    "    if((oldTitle.trim() !== newTitle.trim()) || (oldNotes.trim() !== newNotes.trim())){\r",
                    "        console.log('dream is changed, then only save it, do later');\r",
                    "    }\r",
                    "    newOrOldDream.save(operation);\r",
                    "\r",
                    "}\r",
                    ""
                ],
                "name": "tap",
                "designer|targetType": "Ext.Button",
                "designer|controlQuery": "button[name='dreamDetailsNextButton']"
            },
            "designerId": "9c51680b-4656-4e4d-b939-c8eeac2e2673"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onDreamDetailsBackButtonTap",
                "implHandler": [
                    "var mainTabPanel = this.getMainTabPanel();\r",
                    "var homeTabCardPanel = this.getHomeTabCardPanel();\r",
                    "var dreamForm = this.getDreamDetails();\r",
                    "var dreamListCardPanel = this.getDreamListCardPanel();\r",
                    "var dreamListPanel = this.getDreamListPanel();\r",
                    "\r",
                    "//alert(dreamForm.origin);\r",
                    "// dreamListPanelDreamAdd\r",
                    "// homePageDreamButton\r",
                    "\r",
                    "if(dreamForm.newStatus === 'true' && dreamForm.origin === 'homePageDreamButton') {\r",
                    "\r",
                    "    mainTabPanel.setActiveItem(homeTabCardPanel);\r",
                    "}else {\r",
                    "\r",
                    "    dreamListCardPanel.animateActiveItem(dreamListPanel,{ type : 'slide', direction : 'right'});\r",
                    "\r",
                    "}"
                ],
                "name": "tap",
                "designer|targetType": "Ext.Button",
                "designer|controlQuery": "button[name='dreamDetailsBackButton']"
            },
            "designerId": "075d72c9-245d-4d97-8502-3706d8ebf5fb"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onDreamDeleteButtonButtonTap",
                "implHandler": [
                    "var dreamListPanel = this.getDreamListPanel();\r",
                    "var dreamListCardPanel = this.getDreamListCardPanel();\r",
                    "var dreamDetails = this.getDreamDetails();\r",
                    "var dreamList = this.getDreamList();\r",
                    "var dream = dreamDetails.getRecord();\r",
                    "var dreamsStore = Ext.getStore('dreamsStore');\r",
                    "var utility = MyApp.app.getController('UtilityController');\r",
                    "var storeLoadCallback = utility.storeLoadCallback;\r",
                    "\r",
                    "dreamDetails.updateRecord(dream);\r",
                    "\r",
                    "Ext.Viewport.setMasked({xtype: 'loadmask'});\r",
                    "\r",
                    "Ext.Msg.confirm('', \"Dream and its tortoises will be deleted !\", function(buttonId,value,opt) {\r",
                    "\r",
                    "    if(buttonId === 'yes') { \r",
                    "        dream.getProxy().setAppendId(true);\r",
                    "        dream.erase({ \r",
                    "            scope : this,\r",
                    "            success : function(record, operation) { \r",
                    "                dream.getProxy().setAppendId(false);\r",
                    "                dreamsStore.load(storeLoadCallback);// Have to load again otherwise\r",
                    "                // store list does not get refreshed.                \r",
                    "                dreamListCardPanel.animateActiveItem(dreamListPanel, { type : 'slide', direction : 'right'});\r",
                    "            },\r",
                    "            failure : function(record, operation) { Ext.Msg.alert('',MyApp.app.getServerErrorMessage(),Ext.emptyFn);\r",
                    "                Ext.Viewport.setMasked({xtype: 'loadmask'});}\r",
                    "\r",
                    "            });\r",
                    "\r",
                    "        }\r",
                    "\r",
                    "    });\r",
                    "\r",
                    ""
                ],
                "name": "tap",
                "designer|targetType": "Ext.Button",
                "designer|controlQuery": "button[name='dreamDeleteButton']"
            },
            "designerId": "70fa4141-6d52-4614-b3ac-0aceef2caf90"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onTortoiseListPanelBackButtonTap",
                "implHandler": [
                    "var dreamDetails = this.getDreamDetails();\r",
                    "dreamDetails.newStatus = 'false';\r",
                    "dreamDetails.getScrollable().getScroller().scrollToTop();\r",
                    "this.getDreamListCardPanel().animateActiveItem(dreamDetails, { type : 'slide', direction : 'right'});"
                ],
                "name": "tap",
                "designer|targetType": "Ext.Button",
                "designer|controlQuery": "button[name='tortoiseListPanelBackButton']"
            },
            "designerId": "a0134396-bb69-46ab-95dd-b01b50aafafb"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onTortoiseListItemTap",
                "implHandler": [
                    "var tortoiseDetailsForm = this.getTortoiseDetails();\r",
                    "var tortoiseDetailsBackToDreamButton = this.getTortoiseDetailsBackToDreamButton();\r",
                    "var tortoiseDetailsBackToListButton = this.getTortoiseDetailsBackToListButton();\r",
                    "var tortoiseDeleteButton = this.getTortoiseDeleteButton();\r",
                    "\r",
                    "tortoiseDetailsForm.setRecord(record);\r",
                    "tortoiseDetailsForm.newStatus='false';\r",
                    "\r",
                    "tortoiseDetailsBackToDreamButton.show();\r",
                    "tortoiseDetailsBackToListButton.hide();\r",
                    "tortoiseDeleteButton.show();\r",
                    "\r",
                    "tortoiseDetailsForm.getScrollable().getScroller().scrollToTop();\r",
                    "this.getDreamListCardPanel().animateActiveItem(tortoiseDetailsForm,{ type : 'slide'});"
                ],
                "name": "itemtap",
                "designer|targetType": "TortoiseList",
                "designer|controlQuery": "tortoiseList"
            },
            "designerId": "cbe11079-1bc5-4c39-8c6d-32aa80e3894a"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onTortoiseListPanelAddButtonTap",
                "implHandler": [
                    "var dreamListCardPanel = this.getDreamListCardPanel();\r",
                    "var tortoiseDetails = this.getTortoiseDetails();\r",
                    "var dreamDetailsForm = this.getDreamDetails();\r",
                    "var dream = dreamDetailsForm.getRecord();\r",
                    "var tortoiseDeleteButton = this.getTortoiseDeleteButton();\r",
                    "var tortoiseDetailsBackToDreamButton = this.getTortoiseDetailsBackToDreamButton();\r",
                    "var tortoiseDetailsBackToListButton = this.getTortoiseDetailsBackToListButton();\r",
                    "\r",
                    "var newTortoise = Ext.create('MyApp.model.Tortoise', { });\r",
                    "newTortoise.set('dream', dream.get('id'));\r",
                    "newTortoise.set('title', '');// Otherwise it uses title of old tortoise ! strange\r",
                    "tortoiseDetails.setRecord(newTortoise);\r",
                    "tortoiseDetails.newStatus='true';\r",
                    "\r",
                    "tortoiseDeleteButton.hide();\r",
                    "tortoiseDetailsBackToDreamButton.hide();\r",
                    "\r",
                    "\r",
                    "tortoiseDetailsBackToListButton.show();\r",
                    "tortoiseDetails.getScrollable().getScroller().scrollToTop();\r",
                    "dreamListCardPanel.animateActiveItem(tortoiseDetails, { type : 'slide', direction : 'down'});"
                ],
                "name": "tap",
                "designer|targetType": "Ext.Button",
                "designer|controlQuery": "button[name='tortoiseListPanelAddButton']"
            },
            "designerId": "a73eda5b-6679-4509-9d0e-28fc7012c772"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onTortoiseDetailsSaveButtonTap",
                "implHandler": [
                    "var tortoiseListPanel = this.getTortoiseListPanel();\r",
                    "var tortoiseDetailsForm = this.getTortoiseDetails();\r",
                    "var utility = MyApp.app.getController('UtilityController');\r",
                    "var caller = MyApp.app.getController('DreamsTabController');\r",
                    "\r",
                    "var newStatus = tortoiseDetailsForm.newStatus;\r",
                    "var currentUser = Ext.JSON.decode(localStorage.getItem('userInfo'));\r",
                    "var userid = currentUser.id.toString(); \r",
                    "var tempDreamId = MyApp.app.tempId;\r",
                    "\r",
                    "var newOrOldTortoise = tortoiseDetailsForm.getRecord();\r",
                    "tortoiseDetailsForm.updateRecord(newOrOldTortoise);\r",
                    "\r",
                    "var errorMessage = this.validateTortoise(newOrOldTortoise);\r",
                    "if(errorMessage !== ''){\r",
                    "    Ext.Msg.alert(errorMessage, '', Ext.emptyFn);\r",
                    "    newOrOldTortoise.reject();\r",
                    "    return;\r",
                    "}\r",
                    "\r",
                    "var operation = {};\r",
                    "operation.success = this.tortoiseSave;\r",
                    "operation.failure = function() {Ext.Msg.alert(MyApp.app.getServerErrorMessage(),'',Ext.emptyFn);\r",
                    "    Ext.Viewport.setMasked(false);\r",
                    "return;};\r",
                    "\r",
                    "var tProxy = newOrOldTortoise.getProxy();\r",
                    "var headers = tProxy.getHeaders();\r",
                    "//intDay = intDay === 0 ? 7 : intDay; // On server side sunday is 7 not zero, rest is same\r",
                    "headers[\"Today-Day\"] = MyApp.app.getToday();\r",
                    "tProxy.setHeaders(headers);\r",
                    "\r",
                    "Ext.Viewport.setMasked({xtype: 'loadmask'});\r",
                    "\r",
                    "if(newStatus === 'true'){    \r",
                    "    newOrOldTortoise.set('userid', userid);\r",
                    "    newOrOldTortoise.setDream(newOrOldTortoise.getDream().getData());\r",
                    "    newOrOldTortoise.set('id',MyApp.app.tempId);\r",
                    "    newOrOldTortoise.save(operation);\r",
                    "}else{\r",
                    "    tortoiseId = newOrOldTortoise.get('id');\r",
                    "\r",
                    "    newOrOldTortoise.save(operation);\r",
                    "\r",
                    "}\r",
                    ""
                ],
                "name": "tap",
                "designer|targetType": "Ext.Button",
                "designer|controlQuery": "button[name='tortoiseDetailsSaveButton']"
            },
            "designerId": "71a86a3a-f024-4828-a47b-c5f047ff4b45"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onTortoiseDetailsBackButtonTap",
                "implHandler": [
                    "var dreamListCardPanel = this.getDreamListCardPanel();\r",
                    "var tortoiseListPanel = this.getTortoiseListPanel();\r",
                    "\r",
                    "dreamListCardPanel.animateActiveItem(tortoiseListPanel, {type : 'slide', direction : 'right'});"
                ],
                "name": "tap",
                "designer|targetType": "Ext.Button",
                "designer|controlQuery": "button[name='tortoiseDetailsBackButton']"
            },
            "designerId": "edd5ef49-a3e4-491f-9dae-92d7aa9a1fd1"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "dreamDetails",
                "selector": "dreamDetails"
            },
            "designerId": "02fea2bf-0e5a-4d77-9cdb-28e9aa5b14a3"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "tortoiseDetails",
                "selector": "tortoiseDetails"
            },
            "designerId": "2e52ce66-5384-46d2-9790-f3980756de71"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "tortoiseListPanel",
                "selector": "tortoiseListPanel"
            },
            "designerId": "430ba67e-38f0-45d4-bb25-099ff3a22110"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "whatsYourDreamTextField",
                "selector": "textfield[name='whatsYourDreamTextField']"
            },
            "designerId": "dd2a5c23-2709-48af-b2df-9c5d60a86dbe"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "mainTabPanel",
                "selector": "mainTabPanel"
            },
            "designerId": "8e1af953-b11d-49cd-8b5e-b48c96b3aeda"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "dreamListCardPanel",
                "selector": "dreamListCardPanel"
            },
            "designerId": "c79beb77-dff9-448f-89f9-7b4ac6403799"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "dreamDeleteButton",
                "selector": "button[name='dreamDeleteButton']"
            },
            "designerId": "ef305eb7-5513-4207-9085-41361c671f21"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "dreamListPanel",
                "selector": "dreamListPanel"
            },
            "designerId": "252aaa9d-c100-4ba8-904e-67368f9c07c6"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "tortoiseDetailsBackToListButton",
                "selector": "button[name='tortoiseDetailsBackToListButton']"
            },
            "designerId": "54ba410d-6f2a-4a53-97eb-77e0e43110e6"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onTortoiseDetailsBackToListButtonTap",
                "implHandler": [
                    "var tortoiseListPanel = this.getTortoiseListPanel();\r",
                    "var slideConfig =  { type : 'slide', direction : 'up'}; \r",
                    "this.getDreamListCardPanel().animateActiveItem(tortoiseListPanel,slideConfig);\r",
                    ""
                ],
                "name": "tap",
                "designer|targetType": "Ext.Button",
                "designer|controlQuery": "button[name='tortoiseDetailsBackToListButton']"
            },
            "designerId": "7625c2ae-43e1-4acc-8d19-e72de503e3f9"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "tortoiseDetailsBackToDreamButton",
                "selector": "button[name='tortoiseDetailsBackToDreamButton']"
            },
            "designerId": "ee1a7c6f-bb34-4c99-a6e2-7156fe4f1ead"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onTortoiseDetailsBackHorizontalButtonTap",
                "implHandler": [
                    "\r",
                    "var tortoiseListPanel = this.getTortoiseListPanel();\r",
                    "var slideConfig =  { type : 'slide', direction : 'right'}; \r",
                    "\r",
                    "this.getDreamListCardPanel().animateActiveItem(tortoiseListPanel,slideConfig);"
                ],
                "name": "tap",
                "designer|targetType": "Ext.Button",
                "designer|controlQuery": "button[name='tortoiseDetailsBackToDreamButton']"
            },
            "designerId": "9e0d1c33-a428-4c8e-a723-4a9185188c83"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "tortoiseDeleteButton",
                "selector": "button[name='tortoiseDeleteButton']"
            },
            "designerId": "78977da9-4e33-4a68-9930-057a9efa5651"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onTortoiseDeleteButtonTap",
                "implHandler": [
                    "var tortoiseListPanel = this.getTortoiseListPanel();\r",
                    "var dreamListCardPanel = this.getDreamListCardPanel();\r",
                    "var tortoiseDetails = this.getTortoiseDetails();\r",
                    "var utility = MyApp.app.getController('UtilityController');\r",
                    "var storeLoadCallback = utility.storeLoadCallback;\r",
                    "var tortoisesStore = Ext.getStore('tortoisesStore');\r",
                    "var proxy = tortoisesStore.getProxy();\r",
                    "var orgUrl = proxy.getUrl();\r",
                    "\r",
                    "var tortoise = tortoiseDetails.getRecord();\r",
                    "tortoiseDetails.updateRecord(tortoise);\r",
                    "var dreamId = tortoise.getDream().get('id');\r",
                    "\r",
                    "\r",
                    "Ext.Msg.confirm('', \"Tortoise and its pending tortlets will be deleted !\", function(buttonId,value,opt) {\r",
                    "\r",
                    "    if(buttonId === 'yes') { \r",
                    "        Ext.Viewport.setMasked({xtype: 'loadmask'});\r",
                    "        tortoise.getProxy().setAppendId(true);\r",
                    "        tortoise.erase({ \r",
                    "            scope : this,\r",
                    "            success : function(record, operation) { \r",
                    "                tortoise.getProxy().setAppendId(false);\r",
                    "                var urlWithDream = orgUrl + '&dream=' + dreamId;\r",
                    "                proxy.setUrl(urlWithDream);\r",
                    "                tortoisesStore.load(storeLoadCallback);// Have to load again otherwise\r",
                    "                // store list does not get refreshed. \r",
                    "\r",
                    "                dreamListCardPanel.animateActiveItem(tortoiseListPanel, { type : 'slide', direction : 'right'});\r",
                    "            },\r",
                    "            failure : function(record, operation) { Ext.Msg.alert('',MyApp.app.getServerErrorMessage(),Ext.emptyFn);\r",
                    "            Ext.Viewport.setMasked(false);}\r",
                    "\r",
                    "        });\r",
                    "\r",
                    "    }\r",
                    "\r",
                    "});"
                ],
                "name": "tap",
                "designer|targetType": "Ext.Button",
                "designer|controlQuery": "button[name='tortoiseDeleteButton']"
            },
            "designerId": "53d9a641-9c8a-423b-9d43-e572ba94c8eb"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "homeTabCardPanel",
                "selector": "homeTabCardPanel"
            },
            "designerId": "ab4e2f2f-e66e-4432-b158-a60be9ea4a3d"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "dreamList",
                "selector": "dreamList"
            },
            "designerId": "7cfcb8ce-bab6-4414-84b1-6e83b145ba41"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "tortoiseList",
                "selector": "tortoiseList"
            },
            "designerId": "9b857821-e989-4847-b77e-b76d1a20cd9f"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "dreamSave",
                "designer|params": [
                    "savedModel"
                ],
                "implHandler": [
                    "var dreamsTabController = MyApp.app.getController('DreamsTabController');\r",
                    "var dreamDetails = dreamsTabController.getDreamDetails();\r",
                    "var tortoiseListPanel = dreamsTabController.getTortoiseListPanel();\r",
                    "var dreamsStore = Ext.getStore('dreamsStore');\r",
                    "var tortoisesStore = Ext.getStore('tortoisesStore');\r",
                    "var utility = MyApp.app.getController('UtilityController');\r",
                    "var storeLoadCallback = dreamsTabController.dreamsLoadTortoiseLoad;\r",
                    "var proxy = tortoisesStore.getProxy();\r",
                    "var orgUrl = proxy.getUrl();\r",
                    "\r",
                    "\r",
                    "dreamDetails.setRecord(savedModel); // So that if anybody clicks back,\r",
                    "// form is updated with entity from server.\r",
                    "\r",
                    "var dreamId = savedModel.get('id');\r",
                    "\r",
                    "if ( dreamId == null || dreamId === ''){\r",
                    "    Ext.Msg.alert('Error : DS1. Try Operation Again','',Ext.emptyFn);\r",
                    "    Ext.Viewport.setMasked(false);\r",
                    "\treturn;\r",
                    "}\r",
                    "\r",
                    "var urlWithDream = orgUrl + '&dream=' + dreamId;\r",
                    "proxy.setUrl(urlWithDream);\r",
                    "tortoisesStore.load(function(records, operation, success) {\r",
                    "    Ext.Viewport.setMasked(false);\r",
                    "    if(operation.hasException()) {\r",
                    "        Ext.Msg.alert('',MyApp.app.getServerErrorMessage(),Ext.emptyFn);        \r",
                    "        return;\r",
                    "    }else if(records.length === 0){\r",
                    "        tortoisesStore.removeAll();        \r",
                    "    }\r",
                    "    dreamsStore.load(storeLoadCallback);// Looks like this call can be async, so no\r",
                    "    // no callback function is passed. And it is needed so that server data will return back \r",
                    "    // in case specifically new dream. \r",
                    "    tortoiseListPanel.down('#tortoiseListTitleBar').setTitle(savedModel.get('title'));\r",
                    "    dreamsTabController.getDreamListCardPanel().animateActiveItem(tortoiseListPanel, {type : 'slide'});  \r",
                    "    proxy.setUrl(orgUrl);\r",
                    "},this);\r",
                    ""
                ]
            },
            "designerId": "f15a625d-69b3-4de7-8c83-3e19569c0e97"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "tortoiseSave",
                "designer|params": [
                    "savedModel"
                ],
                "implHandler": [
                    "var dreamsTabController = MyApp.app.getController('DreamsTabController');\r",
                    "var tortoiseListPanel = dreamsTabController.getTortoiseListPanel();\r",
                    "var tortoisesStore = Ext.getStore('tortoisesStore');\r",
                    "var proxy = tortoisesStore.getProxy();\r",
                    "var orgUrl = proxy.getUrl();\r",
                    "var utility = MyApp.app.getController('UtilityController');\r",
                    "var storeLoadCallBack = utility.storeLoadCallback;\r",
                    "\r",
                    "var dream = savedModel.get('dream');\r",
                    "var dreamId = dream.id;\r",
                    "\r",
                    "if ( dreamId == null || dreamId === ''){\r",
                    "    Ext.Msg.alert('Error : TS1. Try Operation Again','',Ext.emptyFn);\r",
                    "    Ext.Viewport.setMasked(false);\r",
                    "\treturn;\r",
                    "}\r",
                    "var urlWithDream = orgUrl + '&dream=' + dreamId;\r",
                    "proxy.setUrl(urlWithDream);\r",
                    "tortoisesStore.load(function(records, operation, success) {\r",
                    "    // Ideally wantto remove this block and reuse storeLoadCallback\r",
                    "    Ext.Viewport.setMasked(false);\r",
                    "    if(operation.hasException()) {\r",
                    "        Ext.Msg.alert('',MyApp.app.getServerErrorMessage(),Ext.emptyFn);\r",
                    "        return;\r",
                    "    }else if(records.length === 0){\r",
                    "        tortoisesStore.removeAll(); \r",
                    "    }\r",
                    "    /* This one is needed if tortoise is created for today, front page should be refreshed right away */\r",
                    "    var tortletsStore = Ext.getStore('incompleteTortletsStore');\r",
                    "    tortletsStore.load(storeLoadCallBack);\r",
                    "    var todaysTortletsStore = Ext.getStore('todaysTortletsStore');\r",
                    "    var todayOrgUrl = todaysTortletsStore.getProxy().getUrl();\r",
                    "    var today = MyApp.app.getToday();\r",
                    "    var todayUrl = todayOrgUrl + '&createdOn=' + today;\r",
                    "    todaysTortletsStore.getProxy().setUrl(todayUrl);\r",
                    "    todaysTortletsStore.load(storeLoadCallBack);\r",
                    "    todaysTortletsStore.getProxy().setUrl(todayOrgUrl);\r",
                    "    /* Closing comment above */\r",
                    "    dreamsTabController.getDreamListCardPanel().animateActiveItem(tortoiseListPanel, {type : 'slide', direction : 'up'});\r",
                    "\r",
                    "    proxy.setUrl(orgUrl);\r",
                    "},this);"
                ]
            },
            "designerId": "74ce3c6d-ee9e-4e83-9953-03cbf898245b"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onTortoiseListBackToDreamButtonTap",
                "implHandler": [
                    "var dreamListPanel = this.getDreamListPanel();\r",
                    "\r",
                    "this.getDreamListCardPanel().setActiveItem(dreamListPanel);\r",
                    ""
                ],
                "name": "tap",
                "designer|targetType": "Ext.Button",
                "designer|controlQuery": "button[name='tortoiseListBackToDreamButton']"
            },
            "designerId": "3d36555b-4ec9-4582-9c50-f2c67c87fa45"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "validateTortoise",
                "designer|params": [
                    "tortoise"
                ],
                "implHandler": [
                    "var errorMessage = '';\r",
                    "var errors = tortoise.validate();\r",
                    "if (!errors.isValid()) {\r",
                    "    errorMessage = 'Enter all mandatory fields'  ;\r",
                    "\r",
                    "}\r",
                    "\r",
                    "if(tortoise.get('monday') === false &&\r",
                    "tortoise.get('tuesday') === false && \r",
                    "tortoise.get('wednesday') === false && \r",
                    "tortoise.get('thursday') === false &&\r",
                    "tortoise.get('friday') === false &&\r",
                    "tortoise.get('saturday') === false &&\r",
                    "tortoise.get('sunday') === false\r",
                    "){\r",
                    "\r",
                    "    errorMessage = 'Select at least one day';   \r",
                    "}\r",
                    "\r",
                    "return errorMessage;"
                ]
            },
            "designerId": "fd6cb084-499d-4e61-b386-2b4b84f58340"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onDreamListPanelDreamAddButtonTap",
                "implHandler": [
                    "\r",
                    "this.onHomeTabNewDreamButtonTap(button,e,eOpts);"
                ],
                "name": "tap",
                "designer|targetType": "Ext.Button",
                "designer|controlQuery": "button[name='dreamListPanelDreamAdd']"
            },
            "designerId": "165d81b5-f162-46a8-94b9-ac599ca41b1a"
        }
    ]
}