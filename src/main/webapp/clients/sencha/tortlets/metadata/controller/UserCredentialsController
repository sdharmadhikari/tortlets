{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "UserCredentialsController"
    },
    "designerId": "4fd5c999-6918-471c-87b8-96d68a98489a",
    "cn": [
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "onLoginFormSignInSuccess",
                "fn": "onLoginFormSignInSuccess",
                "designer|params": [
                    "userObject"
                ],
                "implHandler": [
                    "//alert(userObject.plainPassword);\r",
                    "var currentUser = Ext.create('MyApp.model.Tuser',userObject);\r",
                    "//currentUser.set('id',userObject.id);\r",
                    "//currentUser.set('version',42);\r",
                    "var userid = userObject.userid;\r",
                    "//currentUser.set('userid',userid);\r",
                    "var password = userObject.plainPassword;\r",
                    "\r",
                    "var tok = userid + ':' + password;\r",
                    "var hash = Base64.encode(tok);\r",
                    "var authHeaderValue = \"Basic \" + hash;\r",
                    "\r",
                    "this.currentUser = currentUser; // Here currentUser becomes global variable to be accessed using MyApp.app.currentUser\r",
                    "this.tempId = 0;\r",
                    "var host;\r",
                    "\r",
                    "if(window.location.host === ''){  \r",
                    "    host = 'localhost:8080';    \r",
                    "}else{\r",
                    "    host = window.location.host;\r",
                    "}\r",
                    "\r",
                    "var d = new Date();\r",
                    "var curr_date = d.getDate();\r",
                    "var curr_month = d.getMonth() + 1; //Months are zero based\r",
                    "var curr_year = d.getFullYear();\r",
                    "var today = (curr_month  + \"/\" + curr_date + \"/\" + curr_year);\r",
                    "\r",
                    "//todaysTortletsStore\r",
                    "var todaysTortletsStore = Ext.getStore('todaysTortletsStore');\r",
                    "var proxy = todaysTortletsStore.getProxy();\r",
                    "proxy.setUrl('http://' + host + '/tortlets?find=ByUseridEqualsAndCreatedOnEqualsAndCompleted&userid=' +userid + '&createdOn=' + today);\r",
                    "var headers = proxy.getHeaders();\r",
                    "headers.Authorization = authHeaderValue;\r",
                    "todaysTortletsStore.load();\r",
                    "\r",
                    "//incompleteTortletsStore\r",
                    "var incompleteTortletsStore = Ext.getStore('incompleteTortletsStore');\r",
                    "proxy = incompleteTortletsStore.getProxy();\r",
                    "headers = proxy.getHeaders();\r",
                    "headers.Authorization = authHeaderValue;\r",
                    "proxy.setUrl('http://' + host + '/tortlets?find=ByUseridEqualsAndCompleted&userid=' +userid);\r",
                    "\r",
                    "//dreamsStore\r",
                    "var dreamsStore = Ext.getStore('dreamsStore');\r",
                    "proxy = dreamsStore.getProxy();\r",
                    "headers = proxy.getHeaders();\r",
                    "headers.Authorization = authHeaderValue;\r",
                    "proxy.setUrl('http://' + host + '/dreams?find=ByUseridEquals&userid=' +userid);\r",
                    "\r",
                    "dreamsStore.load();\r",
                    "\r",
                    "//tortoisesStore\r",
                    "var tortoisesStore = Ext.getStore('tortoisesStore');\r",
                    "proxy = tortoisesStore.getProxy();\r",
                    "headers = proxy.getHeaders();\r",
                    "headers.Authorization = authHeaderValue;\r",
                    "proxy.setUrl('http://' + host + '/tortoises?find=ByDreamAndUseridEquals&userid=' +userid);\r",
                    "\r",
                    "////////////////////////////////////////////////////\r",
                    "\r",
                    "var Dream = Ext.ModelMgr.getModel('MyApp.model.Dream');\r",
                    "proxy = Dream.getProxy();\r",
                    "headers = proxy.getHeaders();\r",
                    "headers.Authorization = authHeaderValue;\r",
                    "proxy.setUrl('http://' + host + '/dreams');\r",
                    "\r",
                    "var Tortoise = Ext.ModelMgr.getModel('MyApp.model.Tortoise');\r",
                    "proxy = Tortoise.getProxy();\r",
                    "headers = proxy.getHeaders();\r",
                    "headers.Authorization = authHeaderValue;\r",
                    "proxy.setUrl('http://' + host + '/tortoises');\r",
                    "\r",
                    "var Tortlet = Ext.ModelMgr.getModel('MyApp.model.Tortlet');\r",
                    "proxy = Tortlet.getProxy();\r",
                    "headers = proxy.getHeaders();\r",
                    "headers.Authorization = authHeaderValue;\r",
                    "proxy.setUrl('http://' + host + '/tortlets');\r",
                    "\r",
                    "var homeTabCardPanel = this.getHomeTabCardPanel();\r",
                    "Ext.Viewport.add({ xtype: 'homeTabCardPanel' });\r",
                    "Ext.Viewport.setActiveItem(1);"
                ],
                "name": "signInSuccess",
                "designer|targetType": "LoginModule",
                "designer|controlQuery": "formpanel"
            },
            "designerId": "47ae3609-bfc6-4d03-9378-4390afdb85ae"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "homeTabCardPanel",
                "ref": "homeTabCardPanel",
                "selector": "homeTabCardPanel"
            },
            "designerId": "c7f74e71-6a07-4d98-bcf6-cda16cfcf85d"
        }
    ]
}