{
    "type": "Ext.Panel",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "registrationUrl": "http://localhost:8080/tusers",
        "itemId": "registrationCardPanelItemId",
        "designer|userClassName": "RegistrationCardPanel",
        "designer|userAlias": "registrationCardPanel",
        "designer|initialView": true,
        "layout": "card"
    },
    "designerId": "b1eb75fc-1f7c-4b0c-8765-75107c58b008",
    "customConfigs": [
        {
            "group": "(Custom Properties)",
            "name": "registrationUrl",
            "type": "string"
        }
    ],
    "cn": [
        {
            "type": "Ext.TitleBar",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "docked": "top",
                "title": "Sign Up !"
            },
            "designerId": "7c05c8ef-b3a1-4524-9780-d4ea4bd9de37"
        },
        {
            "type": "Ext.form.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "itemId": "registrationPage1"
            },
            "designerId": "de4e8d8a-aab2-4445-aa2a-2225648874c7",
            "cn": [
                {
                    "type": "Ext.form.FieldSet",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "title": "Personal Details"
                    },
                    "designerId": "ad9f8329-e14a-4724-a2f6-1f8cb18b6ad9",
                    "cn": [
                        {
                            "type": "Ext.field.Text",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "itemId": "firstName",
                                "label": "First Name",
                                "labelWidth": "37%",
                                "name": null
                            },
                            "designerId": "cfe8384b-0baf-45e2-9394-fc12fa4b0c78"
                        },
                        {
                            "type": "Ext.field.Text",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "itemId": "lastName",
                                "label": "Last Name",
                                "labelWidth": "37%",
                                "name": null
                            },
                            "designerId": "fd8089b0-8d4b-4683-8d9c-27daab284334"
                        },
                        {
                            "type": "Ext.field.Email",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "itemId": "userEmail",
                                "label": "Email",
                                "labelWidth": "37%",
                                "name": null,
                                "placeHolder": "email@example.com"
                            },
                            "designerId": "efc42f00-9478-4b20-aebc-0b9ee357e9e9"
                        },
                        {
                            "type": "Ext.field.Email",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "itemId": "confirmEmail",
                                "label": "Confirm Email",
                                "labelWidth": "37%",
                                "name": null,
                                "placeHolder": "email@example.com"
                            },
                            "designerId": "7a590e4b-e2d0-41a0-bb37-49346894359b"
                        }
                    ]
                },
                {
                    "type": "Ext.form.FieldSet",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "title": "Credentials"
                    },
                    "designerId": "370751fa-8fd0-436f-bd1f-86e1c2b5c802",
                    "cn": [
                        {
                            "type": "Ext.field.Text",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "itemId": "userid",
                                "label": "User Id",
                                "labelWidth": "37%",
                                "name": null
                            },
                            "designerId": "e04c15fe-7313-4661-9d89-f6d788d9a435"
                        },
                        {
                            "type": "Ext.field.Password",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "itemId": "password",
                                "label": "Password",
                                "labelWidth": "37%",
                                "name": null
                            },
                            "designerId": "ca110cb3-1c21-41c6-a497-b0f5022a1fc0"
                        },
                        {
                            "type": "Ext.field.Password",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "itemId": "confirmedPassword",
                                "label": "Confirm",
                                "labelWidth": "37%",
                                "name": null
                            },
                            "designerId": "7668c4d9-f3be-4e5c-b228-a653cfa20431"
                        }
                    ]
                },
                {
                    "type": "Ext.form.FieldSet",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "itemId": "myfieldset2",
                        "designer|displayName": "NextButtonFieldSet",
                        "title": null
                    },
                    "designerId": "e3d045b3-4960-4a34-a053-283432f854ed",
                    "cn": [
                        {
                            "type": "Ext.Button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "itemId": "signUpNextButton",
                                "ui": "action",
                                "text": "Next"
                            },
                            "designerId": "20be6260-8d78-4fe7-91dc-3309f7a88c8a",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "fn": "handler",
                                        "designer|params": [
                                            "button",
                                            "event"
                                        ],
                                        "implHandler": [
                                            "var registrationCardPanel = this.up('registrationCardPanel');",
                                            "",
                                            "var firstName = registrationCardPanel.down('#firstName');",
                                            "var lastName = registrationCardPanel.down('#lastName');",
                                            "var userEmail = registrationCardPanel.down('#userEmail');",
                                            "var confirmEmail = registrationCardPanel.down('#confirmEmail');",
                                            "",
                                            "var userid = registrationCardPanel.down('#userid');",
                                            "var password = registrationCardPanel.down('#password');",
                                            "var confirmedPassword = registrationCardPanel.down('#confirmedPassword');",
                                            "",
                                            "var userObject = {};",
                                            "",
                                            "userObject.firstName = firstName.getValue();",
                                            "userObject.lastName = lastName.getValue();",
                                            "userObject.userEmail = userEmail.getValue();",
                                            "userObject.confirmEmail = confirmEmail.getValue();",
                                            "",
                                            "userObject.userid = userid.getValue();",
                                            "userObject.password = password.getValue();",
                                            "userObject.retypePassword = confirmedPassword.getValue();",
                                            "userObject.status = 'ACTIVE';",
                                            "",
                                            "//////////////////////Validations////////////////////////////////",
                                            "var nameRgx = /^[A-Za-z ]{3,20}$/;",
                                            "var emailRgx = /^([a-zA-Z0-9_\\.\\-])+\\@(([a-zA-Z0-9\\-])+\\.)+([a-zA-Z0-9]{2,4})+$/;",
                                            "var useridRgx = /^[A-Za-z0-9_]{6,16}$/;",
                                            "var passwordRgx =  /^[A-Za-z0-9!@#$%^&*()_]{6,100}$/;",
                                            "var errors = [];",
                                            "",
                                            "for(var field in userObject){",
                                            "    console.log(field + ': ' + userObject[field]);",
                                            "    if(userObject[field] === ''){",
                                            "        Ext.Msg.alert('','All fields are mandatory !',Ext.emptyFn);",
                                            "        errors[errors.length] = 'All fields are mandatory !';",
                                            "        return;",
                                            "    }",
                                            "}",
                                            "",
                                            "if(! nameRgx.test(userObject.firstName)){",
                                            "    Ext.Msg.alert('','First Name format invalid',Ext.emptyFn); ",
                                            "    errors[errors.length] = 'First Name format invalid !';",
                                            "    return;",
                                            "}",
                                            "",
                                            "",
                                            "if(! nameRgx.test(userObject.lastName)){",
                                            "    Ext.Msg.alert('','Last Name format invalid',Ext.emptyFn);",
                                            "    errors[errors.length] = 'Last Name format invalid !';",
                                            "    return;",
                                            "}",
                                            "",
                                            "",
                                            "if(! emailRgx.test(userObject.userEmail)){",
                                            "    Ext.Msg.alert('','Email format invalid',Ext.emptyFn); ",
                                            "    errors[errors.length] = 'Email format invalid';",
                                            "    return;",
                                            "}",
                                            "",
                                            "if(userObject.userEmail !== userObject.confirmEmail) {",
                                            "    Ext.Msg.alert('','Emails do not match !',Ext.emptyFn);",
                                            "    errors[errors.length] =  'Emails do not match !';",
                                            "    return;",
                                            "}",
                                            "",
                                            "",
                                            "if(! useridRgx.test(userObject.userid)){",
                                            "    Ext.Msg.alert('','Userid Invalid, must be 6 in length, no special symbols',Ext.emptyFn); ",
                                            "    errors[errors.length] =  'Userid Invalid, must be 6 in length, no special symbols';",
                                            "    return;",
                                            "}",
                                            "",
                                            "if(! useridRgx.test(userObject.password)){",
                                            "    Ext.Msg.alert('','Password invalid, Min 6 in length, allowed a-z,0-9 and symbols !@#$%^&*()_',Ext.emptyFn); ",
                                            "    errors[errors.length] = 'Password invalid, Min 6 in length, allowed a-z,0-9 and symbols !@#$%^&*()_';",
                                            "    return;",
                                            "}",
                                            "",
                                            "",
                                            "if(userObject.password !== userObject.confirmPassword) {",
                                            "    Ext.Msg.alert('','Passwords do not match !',Ext.emptyFn);",
                                            "    errors[errors.length] = 'Passwords do not match !';",
                                            "    return;",
                                            "}",
                                            "",
                                            "Ext.Msg.alert('','testing mode',Ext.emptyFn);",
                                            "return;",
                                            "/*",
                                            "// Remember in order to report all errors at once, you have to remove all return statements.",
                                            "var msg = \"Please Enter Valide Data...\\n\";",
                                            "for (var i = 0; i<errors.length; i++) {",
                                            "    var numError = i + 1;",
                                            "    msg += \"\\n\" + numError + \". \" + errors[i];",
                                            "}",
                                            "alert(msg);",
                                            "*/",
                                            "/////////////////////////////////////////////////////////////////",
                                            "var userObjectJson = Ext.JSON.encode(userObject);",
                                            "",
                                            "",
                                            "var registrationUrl = registrationCardPanel.getInitialConfig().registrationUrl;",
                                            "",
                                            "Ext.Ajax.request({",
                                            "    url: registrationUrl,",
                                            "    method: 'post',",
                                            "    jsonData : userObjectJson,",
                                            "    headers : { ",
                                            "        Accept : 'application/json' ",
                                            "    },",
                                            "    success: function (response) { ",
                                            "        alert('signUpSuccess');",
                                            "        //var loginResponse = Ext.JSON.decode(response.responseText);",
                                            "        //var userObject = loginResponse[0];",
                                            "        //if (loginResponse.length === 1 && userObject.userid === userid) {",
                                            "        //    userObject.plainPassword = password;",
                                            "        //   me.fireEvent('signUpSuccess',loginResponse[0]);",
                                            "        //} else {",
                                            "        //    me.showSignInFailedMessage('Bad Credentials');",
                                            "        //}",
                                            "    },",
                                            "    failure: function (response) {",
                                            "        //me.showSignInFailedMessage('Server error. Please try again later.');",
                                            "        alert('signUpFailure');",
                                            "    }",
                                            "});",
                                            ""
                                        ]
                                    },
                                    "designerId": "07d53a73-cbcf-4352-81e8-d99f78a16f5a"
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "Ext.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "html": "Registration Successful !",
                "itemId": "registrationPage2"
            },
            "designerId": "49bed7f7-365e-49e2-9e55-707aecca6a14",
            "cn": [
                {
                    "type": "Ext.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "text": "Go To Sign In"
                    },
                    "designerId": "4a9b3a27-6712-479e-aa2d-b98446dd2afb",
                    "cn": [
                        {
                            "type": "fixedfunction",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "handler",
                                "designer|params": [
                                    "button",
                                    "event"
                                ],
                                "implHandler": [
                                    "var registrationCardPanel = this.up('registrationCardPanel');",
                                    "registrationCardPanel.fireEvent('signUpSuccess',button);"
                                ]
                            },
                            "designerId": "920b1857-bf6b-42ad-a48f-fab0e0c5c77b"
                        }
                    ]
                }
            ]
        }
    ]
}